<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('<%= cl_image_path @barbecue.pictures%>');">
	<h1><%= @barbecue.name %></h1>
	<h2><%= render 'shared/rating', barbecue: @barbecue %></h2>
</div>

<div class="container">
	<div class="row my-4">

		<div class="col-lg-3 p-0" >
			<%= cl_image_tag @barbecue.pictures, class: "w-100" %>
		</div>

		<div class="col-lg-5 p-4">
			<% full_name = @barbecue.user.first_name + @barbecue.user.last_name %>
			<p><%= cl_image_tag(@barbecue.user.avatar, crop: :fill, class: "avatar") %> <%= link_to full_name, user_path(@barbecue.user.id), class: "text-secondary" %></p>
			<p><strong>Type:</strong> <%= @barbecue.types.capitalize %></p>
			<p><strong><i class="fas fa-clipboard-list"></i></strong> <%= @barbecue.description %></p>
			<p><strong><i class="fas fa-map-marker-alt"></i></strong> <%= @barbecue.address %></p>
			<p><strong><i class="fas fa-user-friends"></i></strong> <%= @barbecue.capacity%></p>
			<p><strong>Price / day:</strong> <%= @barbecue.price %> â‚¬</p>
			<p>
				<% if policy(@barbecue).edit? %>
					<%= link_to edit_barbecue_path(@barbecue), class:"btn btn-success" do %>
						<i class="fas fa-edit"></i> Update
					<% end %>
					<%= link_to barbecue_path, data: { confirm: 'Are you sure?' },class: "btn btn-danger", method: :delete do %>
						<i class="fas fa-trash-alt"></i> Delete
					<% end %>
				<% end %>	
				<% if @barbecue.user != current_user %>
					<%= link_to '<i class="far fa-calendar-alt"></i> Book'.html_safe, new_barbecue_booking_path(@barbecue), class: "btn btn-success" %>
				<%end%>
			</p>
		</div>

		<div class="col-12 col-lg-4">
			<%= render "bookings/new" %>
		</div>

		<div class ="col-lg-12"
        id="map"
        style="width: 100%;
        height: 400px;"
        data-markers="<%= @marker.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
		</div>
	</div>
</div>

